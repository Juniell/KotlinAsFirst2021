# Результаты по оценке покрытия тестовых данных

## 1. Оценка тестового покрытия с помощью IntelliJ IDEA

Можно отметить, что IntelliJ IDEA говорит о 100% покрытии тестируемых функций 
(но не о покрытии класса, что логично). Она проверяет по пройденным строкам.
А потому можно сделать вывод, что написанные тесты проходят по всем строкам тестируемого кода.

## 2. Оценка тестового покрытия с помощью JaCoCo

В отличие от прошлой оценки эта библиотека проверяет прохождение по веткам.
Достичь 100% покрытия по оценкам этой библиотеки не удалось. 
На это, на мой взгляд, есть 2 основные причины:
- Влияние не пройденных тестов на последующие. Например, было замечено, что если один тест провалится,
  то следующие за ним тесты просто не будут учитываться в покрытии, т.к. даже не будут запущены.
- Непосредственно само отсутствующее покрытие для написанных тестов.

Для решения первой причины было решено продублировать используемые классы `Testing` и использовать в них `assertAll()`, 
чтобы выполнить все тесты, даже те, которые идут после проваленных.
Таким образом, в пакеты lessonXX.taskXX было добавлено по одному классу `TestingAll` с использованием
`assertAll()`, а в result/coverage отдельная директория `JaCoco All` с результатами о покрытии.
При их сравнении видно, что, например, для `mostExpensive()` из lesson6 оценка покрытия сменилась 
с 95% до 100% по пропущенным инструкциям и с 78% до 100% по пропущенным веткам.

Для решения же второй причины необходимо дописать тесты, которые проходили бы по всем упущенным веткам и инструкциям.

Кроме того, хотелось бы отметить, что данная библиотека не указывает, какие именно ветки по её мнению были упущены.
Например, для `deleteMarked()` в `Files.kt` в строке `val writeToOutputFile = File(outputName).bufferedWriter()`
говорится об одной пропущенной ветке из 2. И не совсем понятно, какая именно ветка была пропущена.
Тот случай, когда в качестве `outputName` подаётся `null`, что вызовет исключение `NullPointerException`?
Если да, то в рамках данной тестируемой функции подать `outputName = null` не получится.
Если же имеется в виду не эта ветка, то вопрос "а какая именно?" остаётся открытым.
